# preprocess

## Background
Currently in beta.  Note that PyQt4 is required for this module, but it has been tested to work with the Spyder IDE. Intended to work with Abaqus, Gmsh and Calculix to provide completely open source analysis and commercial benchmarking.

Import via `from pyCM import preprocess`

## Initializing
First time it is run, a GUI will ask for paths to various executables for FEA. Next, a file dialogue will query for the surface data file generated by fit_surface. The full GUI will launch with the reference outline displayed. Complete shell support is supported for Abaqus so the exectuable can be `Abaqus`. Full paths are needed for Gmsh and Calculix.

**Input and output descriptors for the FEAtool function**
- Re-spaced, corner preserving outline files either in `*.dxf` or `*.geo` (Gmsh) format
- Mesh-building scripts either for Abaqus CAE (`*.py`) or Gmsh (`*.geo`). Mesh will build with a geometric distribution away from the contour surface in an identical manner for both Abaqus and Gmsh. *Note that the Abaqus CAE script requires a dxf file, and the resulting input file will inherit the dxf file's prefix NOT the script.*
- Will output raw meshes in the form of both `*.inp` files from Abaqus CAE to legacy VTK and employs native VTK translation for Gmsh
- Input decks for both Calculix and Abaqus with equivalent parameters containing rigid body BCs, surface displacement (contour) and material types; `*_ccx.inp` and `*_abq.inp` respectively as both packages share the same prefix.
- Facility to input and run these input decks with the relevant FEA package (Abaqus or Calculix)

##  Interaction functionality
Beyond the buttons/inputs located on the GUI, the following are available:

Key | Description
---  |---
Left mouse button 	|Rotate about the center of view
Middle mouse button 	|Pan
Right mouse button 	|Zoom/refresh window extents
1 	|View 1, default, looks down z axis onto xy plane
2 	|View 2, default, looks down x axis onto zy plane
3 	|View 3, default, looks down y axis onto zx plane
z | Increase z-aspect ratio of displacement BC
x | Decrease z-aspect ratio of displacement BC
c | Return to default z-aspect
f | Flip colors from white on dark to dark on white
i | Save output to .png in current working directory
r | Remove/reinstate outline
LMB+p | The p button with the *Left mouse button* allow for selecting rigid body boundary conditions. Click first and then press p to select.
e | Allows the user to change their FEA exec location

Processing is intended to be procedural, working top to bottom with the pane on the righthand side of the GUI. Status and updates are provided by the italicised line on the bottom of the GUI pane, as well as periodic messages to the terminal/command line.

## Known issues
There are a lot of moving parts to this one, and all features haven't been thoroughly tested.

If FEA submission fails for some reason, check the directory that it was run from and try running it manually. On Windows, it's been observed that Calculix's Cygwin coupling can conflict with other Cygwin applications.