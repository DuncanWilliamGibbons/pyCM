# preprocess

## Background
Currently in beta - works with Abaqus, but there is a bug in working with gmsh-generated meshes.  Note that PyQt4 is required for this module, but it has been tested to work with the Spyder IDE. Intended to work with Abaqus, Gmsh and Calculix to provide completely open source analysis and commercial benchmarking.

## Hierarchy

* Module `preprocess`
 - Function `FEAtool`

Import via `from pyCM import preprocess`

## Initializing
First time it is run, a GUI will ask for paths to various executables for FEA. Next, a file dialogue will query for the surface data file generated by fit_surface. The full GUI will launch with the reference outline displayed.

**Input and output descriptors for the FEAtool function**
-Outline files either in dxf or geo (gmsh) format
-Mesh-building scripts either for Abaqus CAE (py) or Gmsh (geo)
-Output for both inp files from Abaqus CAE to legacy VTK and native VTK translation for Gmsh
-Input decks for both Calculix and Abaqus with equivalent parameters containing rigid body BCs, surface displacement (contour) and material types.
-Facility to input and run these input decks with the relevant FEA package (Abaqus or Calculix)

##  Interaction functionality
Beyond the buttons located on the GUI, the following are available:

Key | Description
---  |---
Left mouse button 	|Rotate about the center of view
Middle mouse button 	|Pan
Right mouse button 	|Zoom/refresh window extents
1 	|View 1, default, looks down z axis onto xy plane
2 	|View 2, default, looks down x axis onto zy plane
3 	|View 3, default, looks down y axis onto zx plane
z | Increase z-aspect ratio of displacement BC
x | Decrease z-aspect ratio of displacement BC
c | Return to default z-aspect
f | Flip colors from white on dark to dark on white
i | Save output to .png in current working directory
r | Remove/reinstate outline
e | Allows the user to change their FEA exec location

## Known issues

The tool operates on converting meshes to VTK unstructured grids. Gmsh, by default, includes 1D, 2D as well as the required 3D elements. A filter has yet to be written to only operate/write volumetric elements to input files for Abaqus and Calculix.